/*==================================================================================
// DARK THEME CUSTOM CSS (ĐÃ TINH CHỈNH CUỐI CÙNG)
// Tên theme: theme-dark-custom
// Bảng màu cốt lõi: Nền Tối (#212530), Card Tối (#292d40), Điểm nhấn Vàng (#FFF200)
==================================================================================*/

/* -----------------------------------------------------------------------------
 * 0. KHAI BÁO CUSTOM PROPERTIES (BIẾN CSS)
 * -----------------------------------------------------------------------------*/
html[data-theme="theme-dark-custom"] {
    /* -------------------- MÀU CƠ BẢN -------------------- */
    --color-primary-dark: #303481; /* Xanh Dương Đậm */
    --color-body-bg: #212530; /* Nền Body Tối */
    --color-light-bg: #D6E6F2; /* Xanh Dương Nhạt (Màu chữ chính) */
    --color-high-contrast-text: #FFF200; /* Vàng (Điểm nhấn/Active) */
    --color-text-on-contrast: var(--color-primary-dark); /* Xanh Đậm (Chữ trên nền Vàng) */
    /* -------------------- MÀU DẪN XUẤT -------------------- */
    --custom-text-main: var(--color-light-bg);
    --custom-text-heading: #fff; /* Trắng sáng */
    --custom-text-muted: #c9d0e2; /* <<< ĐIỀU CHỈNH: Chữ phụ sáng hơn để dễ đọc (Sidebar header, muted text) */
    --custom-primary: var(--color-high-contrast-text);
    --custom-primary-dark: var(--color-primary-dark);
    --custom-primary-dark-hover: #1f2260;
    --custom-primary-tint: rgba(255, 242, 0, 0.15); /* Nền nhạt Active Menu */
    /* Nền chung và Viền */
    --custom-body-bg: var(--color-body-bg);
    --custom-card-bg: #292d40; /* Nền Card/Table */
    --custom-primary-bg-dark: #1b1e28; /* Nền Sidebar/Navbar (Rất tối) */
    --custom-footer-bg: #292d40;
    --custom-hover-bg-light: #34394f; /* Nền hover cho table/menu (Sáng hơn Card) */
    --custom-hover-bg-dark: #1f2260; /* Nền hover cho input */
    --custom-border-color: #3b3f5d; /* Viền */
    --custom-menu-header-text: #d6e6f2; /* <<< ĐIỀU CHỈNH: Tiêu đề Sidebar sáng hơn */

    --custom-pagi-inactive-bg: rgba(255, 242, 0, 0.05);
    /* MÀU TRẠNG THÁI */
    --custom-info: #35a5d8;
    --custom-danger: #ff573a;
    --custom-info-tint: rgba(53, 165, 216, 0.2);
    --custom-danger-tint: rgba(255, 87, 58, 0.2);
    /* Ánh xạ biến sang Bootstrap Variables */
    --bs-body-bg: var(--custom-body-bg);
    --bs-body-color: var(--custom-text-main);
}

/* -----------------------------------------------------------------------------
 * 1. KHU VỰC CHUNG (BODY, FONT, LINKS, HEADING, CARD, BORDER)
 * -----------------------------------------------------------------------------*/

/* 1.1. Body & Text */
html[data-theme="theme-dark-custom"] {
    color: var(--custom-text-main);
}

    html[data-theme="theme-dark-custom"] .text-body {
        color: var(--custom-text-main) !important;
    }

    html[data-theme="theme-dark-custom"] .text-muted,
    html[data-theme="theme-dark-custom"] .text-secondary {
        color: var(--custom-text-muted) !important; /* Muted sáng */
    }

    /* 1.2. Links: Màu Vàng */
    html[data-theme="theme-dark-custom"] a {
        color: var(--custom-primary);
    }

        html[data-theme="theme-dark-custom"] a:hover {
            color: #ffe800; /* Vàng sáng hơn */
        }

    /* 1.3. Headings */
    html[data-theme="theme-dark-custom"] h1,
    html[data-theme="theme-dark-custom"] h2,
    html[data-theme="theme-dark-custom"] h3,
    html[data-theme="theme-dark-custom"] h4,
    html[data-theme="theme-dark-custom"] h5,
    html[data-theme="theme-dark-custom"] h6 {
        color: var(--custom-text-heading);
    }

    /* 1.4. Card, Dropdown, Border */
    html[data-theme="theme-dark-custom"] .card,
    html[data-theme="theme-dark-custom"] .list-group-item,
    html[data-theme="theme-dark-custom"] .dropdown-menu,
    html[data-theme="theme-dark-custom"] .modal-content,
    html[data-theme="theme-dark-custom"] .offcanvas {
        background-color: var(--custom-card-bg) !important;
        border-color: var(--custom-border-color) !important;
    }

    html[data-theme="theme-dark-custom"] .border,
    html[data-theme="theme-dark-custom"] .card-header,
    html[data-theme="theme-dark-custom"] .card-footer {
        border-color: var(--custom-border-color) !important;
    }

    /* FIX: Icon Border trong H1 */
    html[data-theme="theme-dark-custom"] .text-primary {
        color: var(--color-high-contrast-text) !important; /* Chữ Vàng */
    }

        html[data-theme="theme-dark-custom"] .text-primary.border {
            border-color: var(--color-high-contrast-text) !important; /* Viền Vàng */
        }


    /* -----------------------------------------------------------------------------
 * 2. NAVBAR (bg-navbar-theme)
 * -----------------------------------------------------------------------------*/
    html[data-theme="theme-dark-custom"] .bg-navbar-theme {
        background-color: var(--custom-primary-bg-dark) !important;
        color: var(--custom-text-main);
        backdrop-filter: none;
    }
        /* Menu Link */
        html[data-theme="theme-dark-custom"] .bg-navbar-theme .navbar-nav > .nav-link,
        html[data-theme="theme-dark-custom"] .bg-navbar-theme .navbar-text {
            color: var(--custom-text-main);
        }

            html[data-theme="theme-dark-custom"] .bg-navbar-theme .navbar-nav > .nav-link:hover,
            html[data-theme="theme-dark-custom"] .bg-navbar-theme .navbar-nav .show > .nav-link {
                color: var(--custom-text-heading);
            }
    /* NÚT THU GỌN SIDEBAR (Layout Toggle) */
    html[data-theme="theme-dark-custom"] .layout-menu-toggle {
        color: var(--color-high-contrast-text) !important; /* <<< ĐIỀU CHỈNH: Nút Thu gọn màu Vàng */
    }

    /* -----------------------------------------------------------------------------
 * 3. MENU / SIDEBAR (bg-menu-theme)
 * -----------------------------------------------------------------------------*/
    html[data-theme="theme-dark-custom"] .bg-menu-theme {
        background-color: var(--custom-primary-bg-dark) !important;
        color: var(--custom-text-main);
    }

        /* 3.1. Menu Link (Default) - Sử dụng custom-text-main (Trắng/Sáng) */
        html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-link {
            color: var(--custom-text-main);
        }

            /* 3.2. Menu Link (Hover / Open) */
            html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-link:hover,
            html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-item.open:not(.menu-item-closing) > .menu-toggle {
                color: var(--custom-text-heading);
                background-color: var(--custom-hover-bg-light) !important;
            }

        /* 3.3. Menu Item Active (Mục cha/Mục đơn đang active) */
        html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-inner > .menu-item.active > .menu-link {
            color: var(--color-high-contrast-text); /* Chữ Vàng */
            background-color: var(--custom-primary-tint) !important;
        }

        /* 3.4. Dấu nhấn Menu Active dọc */
        html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-inner > .menu-item.active:before {
            background: var(--color-high-contrast-text); /* MÀU VÀNG */
        }

        /* 3.5. Menu Header */
        html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-header {
            color: var(--custom-menu-header-text);
            opacity: 1;
        }

        /* [Giữ lại các quy tắc Menu Active / Logo Text từ bản trước] */
        html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-inner > .menu-item.active > .menu-link {
            color: var(--color-high-contrast-text); /* Chữ Vàng */
            background-color: var(--custom-primary-tint) !important; /* Nền Vàng Tint */
        }

    /* 3.6. APP BRANDING (Logo Text) */
    html[data-theme="theme-dark-custom"] .app-brand-text.menu-text {
        color: var(--color-high-contrast-text) !important; /* Vàng cho chữ "Quản lý" */
    }

        html[data-theme="theme-dark-custom"] .app-brand-text.menu-text .fs-tiny {
            color: var(--color-high-contrast-text) !important; /* Vàng cho chữ "THƯ VIỆN" */
            opacity: 0.8;
        }

    /* 3.7. MỤC CON ACTIVE (menu-sub > li.active) */
    html[data-theme="theme-dark-custom"] .bg-menu-theme .menu-sub > .menu-item.active > .menu-link {
        color: var(--custom-text-heading) !important; /* <<< Chữ Trắng */
        background-color: var(--custom-hover-bg-light) !important; /* <<< Nền tối sáng hơn */
    }

    /* -----------------------------------------------------------------------------
 * 4. FOOTER (bg-footer-theme)
 * -----------------------------------------------------------------------------*/
    html[data-theme="theme-dark-custom"] .bg-footer-theme {
        background-color: var(--custom-footer-bg) !important;
        color: var(--custom-text-heading);
    }

    /* -----------------------------------------------------------------------------
 * 5. FORM CONTROLS & BUTTONS
 * -----------------------------------------------------------------------------*/

    /* 5.1. Input / Select */
    html[data-theme="theme-dark-custom"] .form-control,
    html[data-theme="theme-dark-custom"] .form-select,
    html[data-theme="theme-dark-custom"] .input-group-text {
        background-color: var(--custom-card-bg);
        border-color: var(--custom-border-color);
        color: var(--custom-text-main);
    }

    /* 5.2. Button Primary (Nền Vàng, Chữ Xanh Đậm) */
    html[data-theme="theme-dark-custom"] .btn-primary {
        color: var(--color-text-on-contrast) !important; /* <--- MÀU XANH ĐẬM */
        background-color: var(--color-high-contrast-text) !important; /* <--- MÀU VÀNG */
        border-color: var(--color-high-contrast-text) !important;
    }

        html[data-theme="theme-dark-custom"] .btn-primary:hover {
            background-color: #e0d000 !important; /* Vàng tối hơn */
            border-color: #e0d000 !important;
            color: var(--color-text-on-contrast) !important;
        }

    /* 5.3. Button Outline Primary (Viền Vàng, Chữ Vàng) */
    html[data-theme="theme-dark-custom"] .btn-outline-primary {
        color: var(--color-high-contrast-text);
        border-color: var(--color-high-contrast-text);
    }

        html[data-theme="theme-dark-custom"] .btn-outline-primary:hover {
            color: var(--color-text-on-contrast); /* Chữ Xanh Đậm khi hover */
            background-color: var(--color-high-contrast-text);
        }

    /* 5.4. Text Primary (Dùng cho Tiêu đề, Icon) */
    html[data-theme="theme-dark-custom"] .text-primary {
        color: var(--color-high-contrast-text) !important;
    }


    /* -----------------------------------------------------------------------------
 * 6. TABLE & PAGINATION
 * -----------------------------------------------------------------------------*/

    /* 6.1. Table Body (ĐÃ SỬA: Màu nền đậm hơn Body và có dải màu) */
    html[data-theme="theme-dark-custom"] .table {
        --bs-table-bg: var(--custom-card-bg); /* Nền mặc định: Card Dark */
        --bs-table-striped-bg: #2e324c; /* Màu sọc (Striped) */
        --bs-table-hover-bg: #34394f; /* Màu hover */
        --bs-table-color: var(--custom-text-main); /* Chữ Xanh Nhạt */
        border-color: var(--custom-border-color); /* Viền */
    }
    /* Table Header (Nền Vàng, Chữ Xanh Đậm) */
    html[data-theme="theme-dark-custom"] #myTableHead {
        background-color: var(--color-high-contrast-text) !important;
        color: var(--color-text-on-contrast) !important;
    }

        html[data-theme="theme-dark-custom"] #myTableHead th {
            color: var(--color-text-on-contrast) !important;
            background-color: var(--color-high-contrast-text) !important;
            border-color: #e0e0e0 !important;
        }

    /* Table Body/Row hover */
    html[data-theme="theme-dark-custom"] .table.table-hover > tbody > tr:hover > * {
        background-color: var(--bs-table-hover-bg) !important;
    }

    /* 6.2. Pagination (ĐÃ SỬA: Độ tương phản tốt hơn) */
    /* Màu chữ mặc định (Không active) */
    html[data-theme="theme-dark-custom"] .pagination .page-link,
    html[data-theme="theme-dark-custom"] .pagination .page-item:not(.active) .page-link {
        color: var(--custom-text-main);
        background-color: var(--custom-pagi-inactive-bg); /* <<< ĐÃ SỬA: Nền Vàng Tint rất nhẹ */
        border-color: var(--custom-border-color);
    }
        /* Hover state */
        html[data-theme="theme-dark-custom"] .pagination .page-link:hover {
            color: var(--color-high-contrast-text);
            background-color: var(--custom-primary-tint); /* Nền Vàng Tint khi hover */
            border-color: var(--custom-border-color);
        }

    /* Màu Active */
    html[data-theme="theme-dark-custom"] .pagination .page-item.active .page-link {
        color: var(--color-text-on-contrast); /* Chữ Xanh Đậm */
        background-color: var(--color-high-contrast-text); /* Nền Vàng */
        border-color: var(--color-high-contrast-text); /* Viền Vàng */
    }

    /* -----------------------------------------------------------------------------
 * 7. UTILITIES: BADGES & ICON BUTTONS
 * -----------------------------------------------------------------------------*/

    /* NEW: General Button Icon Style (Áp dụng hiệu ứng hover) */
    html[data-theme="theme-dark-custom"] .btn-icon {
        transition: all 0.2s ease-in-out;
    }

        html[data-theme="theme-dark-custom"] .btn-icon:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.3);
        }

    /* 7.2. Button Icon (btn-label-*) */

    /* Info */
    html[data-theme="theme-dark-custom"] .btn-label-info {
        background-color: var(--custom-info-tint) !important;
        color: var(--custom-info) !important;
        border-color: var(--custom-border-color);
    }

        html[data-theme="theme-dark-custom"] .btn-label-info:hover {
            background-color: rgba(53, 165, 216, 0.3) !important;
        }

    /* Primary (Màu Vàng - Điểm nhấn) */
    html[data-theme="theme-dark-custom"] .btn-label-primary {
        background-color: var(--custom-primary-tint) !important; /* Nền Vàng Tint */
        color: var(--color-high-contrast-text) !important; /* Chữ Vàng */
        border-color: var(--custom-border-color); /* Viền */
    }

        html[data-theme="theme-dark-custom"] .btn-label-primary:hover {
            background-color: rgba(255, 242, 0, 0.25) !important; /* Vàng Tint Đậm hơn */
        }

    /* Danger */
    html[data-theme="theme-dark-custom"] .btn-label-danger {
        background-color: var(--custom-danger-tint) !important;
        color: var(--custom-danger) !important;
        border-color: var(--custom-border-color);
    }

        html[data-theme="theme-dark-custom"] .btn-label-danger:hover {
            background-color: rgba(255, 87, 58, 0.3) !important;
        }


    /* -----------------------------------------------------------------------------
 * 8. PHẦN BỔ SUNG
 * -----------------------------------------------------------------------------*/

    /* 8.1. SCROLLBAR */
    html[data-theme="theme-dark-custom"] ::-webkit-scrollbar-thumb {
        background-color: rgba(255, 255, 255, 0.15);
    }

    /* 8.2. CUSTOM NAV-PILLS (_DanhMuc) */

    /* Default state (Chữ Xanh Nhạt) */
    html[data-theme="theme-dark-custom"] .nav-pills .nav-link {
        color: var(--custom-text-main);
        border: 1px solid var(--custom-border-color);
        background-color: var(--custom-card-bg); /* Nền Card */
        margin: 0.25rem;
        border-radius: 0.5rem;
    }

        /* Hover state (Nền tối hơn, Chữ Trắng) */
        html[data-theme="theme-dark-custom"] .nav-pills .nav-link:not(.active):hover {
            color: var(--custom-text-heading);
            background-color: var(--custom-hover-bg-dark); /* Nền tối hơn khi hover */
            border-color: var(--custom-border-color);
        }

        /* Active state (Nền Vàng, Chữ Xanh Đậm) */
        html[data-theme="theme-dark-custom"] .nav-pills .nav-link.active {
            color: var(--color-text-on-contrast) !important; /* <--- MÀU XANH ĐẬM */
            background-color: var(--color-high-contrast-text) !important; /* <--- NỀN VÀNG */
            border-color: var(--color-high-contrast-text) !important;
            box-shadow: 0 0.125rem 0.25rem rgba(255, 242, 0, 0.3);
        }

    /* 8.3. ALERTS */
    html[data-theme="theme-dark-custom"] .alert-primary {
        color: var(--custom-text-main);
        background-color: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.2);
    }

    html[data-theme="theme-dark-custom"] .alert-info {
        color: var(--custom-info);
        background-color: rgba(53, 165, 216, 0.1);
        border-color: rgba(53, 165, 216, 0.2);
    }

    /* 8.4. MODAL & OFFCANVAS */
    html[data-theme="theme-dark-custom"] .modal-content,
    html[data-theme="theme-custom-dark"] .offcanvas {
        background-color: var(--custom-card-bg);
        color: var(--custom-text-main);
        border-color: var(--custom-border-color);
    }
