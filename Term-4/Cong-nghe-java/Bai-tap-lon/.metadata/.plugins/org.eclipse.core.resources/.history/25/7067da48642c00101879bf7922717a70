package com.battleship.data.loader;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

import com.battleship.core.model.Position;
import com.battleship.core.model.board.Board;
import com.battleship.core.model.ship.Ship;

public class BotBoardLoader implements IBoardLoader {

	@Override
    public Board loadBoard(String filePath) throws IOException {
        Board board = new Board();
        try (BufferedReader br = new BufferedReader(new FileReader(filePath))) {
            String line;
            while ((line = br.readLine()) != null && !line.trim().isEmpty()) {
                String[] parts = line.trim().split("\\s+");
                if (parts.length < 4) continue;
                
                int x = Integer.parseInt(parts[0]);
                int y = Integer.parseInt(parts[1]);
                int length = Integer.parseInt(parts[2]);
                boolean isHorizontal = Boolean.parseBoolean(parts[3]);
                
                Ship ship = new Ship(length);
                ship.setHorizontal(isHorizontal);
                board.placeShip(ship, new Position(x, y));
            }
        }
        return board;
    }

}
